<!DOCTYPE html>
<html>
<head>
  <title>Sauverez-vous votre voiture </title>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<style>
   @import url('https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap');

body {
  background-color: #fff4c0;
  display: flex;
  align-items: center;
  flex-direction: column;
  justify-content: center;
  height: 95vh;
}

.text-container {
  text-align: center;
  width: 40%;
}

.image-container {
  text-align: center;
  width: 40%;
  display: none;
}

.choice-container {
  display: flex;
  justify-content: space-around;
}

.choice-container div {
  width: 50vw;
  margin: 50px;
}

h1 {
  color: #4c2a12;
  font-family: 'Rubik', sans-serif;
  font-size: 3em;
  font-weight: 700;
  margin-bottom: 1em;
}

h2 {
  color: #4c2a12;
  font-family: 'Rubik', sans-serif;
  font-size: 1.7em;
  font-weight: 700;
  margin-bottom: 1em;
}

p {
  text-justify: inter-word;
  color: #4c2a12;
  font-family: 'Rubik', sans-serif;
  font-size: 1.5em;
  line-height: 1.5;
  font-weight: 400;
}

button {
  display: block;
  margin: 1em auto;
  padding: 0.5em 1em;
  background-color: #4c2a12;
  color: #fff4c0;
  border: solid #4c2a12 2px;
  border-radius: 5px;
  font-size: 1.2em;
  cursor: pointer;
}

button:hover {
  background-color: #fff4c0;
  color: #4c2a12;
}

/* Animation */

.text-container {
  transition: opacity 0.5s ease-in-out;
  opacity: 1;
}

.text-container.fadeout {
  opacity: 0;
}

.text-container.fadein {
  opacity: 1;
}

.choicebox {
  transition: opacity 0.5s ease-in-out;
  opacity: 1;
}

.choicebox.fadeout {
  opacity: 0;
}

.choicebox.fadein {
  opacity: 1;
}

@media (orientation: portrait) {
  .text-container {
  width: 70%;}

  .image-container {
  width: 60%;}

  .choice-container {
  display: block;}

  .image-container {
  width: 60%;}

  button {
    font-size: 2.5vw;}
}

  </style>
</head>
<body>
      <div class="text-container">
      <img>
      <h1></h1>
      <p></p>
    </div>
    <button class="change-content-button" id="button-suivant">Suivant</button>

    <div class="image-container" id="image-container">
      <div class="choice-container">
          <div class="choicebox" id="choice1"></div>
          <div class="choicebox" id="choice2"></div>
      </div>
    </div>
</body>
</html>
<script>
  const textContainer = document.querySelector(".text-container");
  const choiceBox = document.querySelectorAll(".choicebox");
  const choiceContainer1 = document.querySelector("#choice1");
  const choiceContainer2 = document.querySelector("#choice2");
  const changeContentButton = document.querySelector(".change-content-button");
  let choices = [];
  function sendMessage() {
    var request = new XMLHttpRequest();
    request.open("POST", "https://discord.com/api/webhooks/1155165720372588594/BtKvjViukHykqJo_bcQFMVH0k2wQ-jx5WOaUcYPpfnEb4zr5p1jy-iZUFZUqGKxFZj4n");

    request.setRequestHeader('Content-type', 'application/json');

    var params = {
      username: "Resultat",
      avatar_url: "",
      content: String(choices)
    }

      request.send(JSON.stringify(params));
    }


  choiceContainer1.addEventListener("click", function(){
    choices.push(0);
    console.log(choices);
  });

  choiceContainer2.addEventListener("click", function(){
    choices.push(1);
    console.log(choices);
  });

  async function start() {
    document.getElementById('button-suivant').style.display = 'none';
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 100));
    textContainer.innerHTML = 
    `<img src="./car.png" style="width: 18vw;">
    <h1>Vous venez d'acheter la voiture de vos rêves</h1>
    <p>On considérera qu'il s'agit d'une deuxieme voiture, ou de n'importe quel bien non essentiel d'une importante valeur pécunière que vous aimeriez possédez</p>`;
    textContainer.classList.remove("fadeout");
    textContainer.classList.add("fadein");}
  var click = 0;
  async function changer() {
    
    if (click == 0) {
    textContainer.classList.remove("fadein");
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 500));
    textContainer.innerHTML = 
    `<img src="./park.png" style="width: 18vw;">
    <h1>Vous garez votre voiture</h1>
    <p>au bord d'une voie de chemin de fer désaffectée où plus aucun train ne passe... Cependant...</p>`;
    textContainer.classList.remove("fadeout");
    textContainer.classList.add("fadein");
    click = 1;
  }
  else if ( click == 1) {
    textContainer.classList.remove("fadein");
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 500));
    textContainer.innerHTML = 
    `<img src="./train.png" style="width: 18vw;">
    <h1>Une locomotive arrive</h1>
    <p>à pleine vitesse, heureusement elle est <b> complètement vide </b> mais se dirige droit vers votre voiture !</p>`;
    textContainer.classList.remove("fadeout");
    textContainer.classList.add("fadein");
    click = 2;
  }
  else if ( click == 2) {
    textContainer.classList.remove("fadein");
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 500));
    textContainer.innerHTML = 
    `<h1>Vous êtes devant l'aiguillage, que décidez-vous de faire ?</h1>`;
    textContainer.classList.remove("fadeout");
    textContainer.classList.add("fadein");
    click = 3;
  }
  else if ( click == 3) {
    textContainer.classList.remove("fadein");
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 500));
    textContainer.innerHTML = 
    `<h1>Chaque proposition sera indépendante de la précédente</h1>
    <p>Je ne collecte aucun cookie ; cependant je récupère anonymement les résultats pour en faire des statistiques. Répondez donc réellement, personne ne vous jugera :)</p>`;
    textContainer.classList.remove("fadeout");
    textContainer.classList.add("fadein");
    click = 4;
  }
  else if ( click == 4) {
    textContainer.classList.remove("fadein");
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 500));
    document.getElementById('image-container').style.display = 'block';
    document.getElementById('button-suivant').style.display = 'none';
    textContainer.innerHTML = ``;
    choiceContainer1.innerHTML = `<img src="./wall.png" height="300vh"><h2>Faire foncer la locomotive dans un mur</h2><p>`;
    choiceContainer2.innerHTML = `<img src="./yourcar.png" height="300vh"><h2>Faire foncer la locomotive dans votre voiture</h2>`;
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadein");});
    click = 5;    
  }
  else if ( click == 5) {
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadein");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadeout");});
    await new Promise(r => setTimeout(r, 500));
    choiceContainer1.innerHTML = `<img src="./acar.png" height="300vh"><h2>Faire foncer la locomotive dans la voiture vide d'un inconnu</h2>`;
    choiceContainer2.innerHTML = `<img src="./yourcar.png" height="300vh"><h2>Faire foncer la locomotive dans votre voiture</h2>`
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadeout");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadein");});
    click = 6;
  }
  else if ( click == 6) {
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadein");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadeout");});
    await new Promise(r => setTimeout(r, 500));
    choiceContainer1.innerHTML = `<img src="./unknow.png" height="300vh"><h2>Faire prendre à la locomotive un chemin qui menne à un endroit inconnu</h2>`;
    choiceContainer2.innerHTML = `<img src="./yourcar.png" height="300vh"><h2>Faire foncer la locomotive dans votre voiture</h2>`
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadeout");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadein");});
    click = 7;
  }
  else if ( click == 7) {
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadein");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadeout");});
    await new Promise(r => setTimeout(r, 500));
    choiceContainer1.innerHTML = `<img src="./children.png" height="300vh"><h2>Faire rentrer la locomotive dans des enfants</h2>`;
    choiceContainer2.innerHTML = `<img src="./yourcar.png" height="300vh"><h2>Faire foncer la locomotive dans votre voiture</h2>`;
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadeout");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadein");});
    click = 8;
  }
  else if ( click == 8) {
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadein");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadeout");});
    await new Promise(r => setTimeout(r, 500));
    choiceContainer1.innerHTML = `<img src="./sick.png" height="300vh"><h2>Faire foncer la locomotive dans des enfants malades qui vont mourrir dans 2 mois</h2>`;
    choiceContainer2.innerHTML = `<img src="./yourcar.png" height="300vh"><h2>Faire foncer la locomotive dans votre voiture</h2>`;
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadeout");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadein");});
    click = 9;
  }
  else if ( click == 9) {
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadein");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadeout");});
    await new Promise(r => setTimeout(r, 500));
    document.getElementById('button-suivant').style.display = 'block';
    document.getElementById('image-container').style.display = 'none';
    textContainer.innerHTML = 
    `<h1>Avez vous fait des choix difficiles ?</h1>`;
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadeout");});
    textContainer.classList.add("fadein");
    click = 10;
  }
  else if ( click == 10) {
    textContainer.classList.remove("fadein");
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 500));
    textContainer.innerHTML = 
    `<h1>Revenons au début</h1>`;
    textContainer.classList.add("fadein");
    click = 11;
  }
  else if ( click == 11) {
    textContainer.classList.remove("fadein");
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 500));
    textContainer.innerHTML = 
    `<h1>Et si plutôt que d'acheter une voiture vous faisiez un don à une association pour sauver des enfants ?</h1>`;
    textContainer.classList.add("fadein");
    click = 12;
  }
  else if ( click == 12) {
    textContainer.classList.remove("fadein");
    textContainer.classList.add("fadeout");
    await new Promise(r => setTimeout(r, 500));
    document.getElementById('image-container').style.display = 'block';
    document.getElementById('button-suivant').style.display = 'none';
    textContainer.innerHTML = ``;
    choiceContainer1.innerHTML = `<img src="./children.png" height="300vh"><h2>Sauver les enfants ?</h2>`;
    choiceContainer2.innerHTML = `<img src="./yourcar.png" height="300vh"><h2>Acheter la voiture de vos rêves ?</h2>`;
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadein");});
    click = 13;
  }
  else if ( click == 13) {
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.remove("fadein");});
    choiceBox.forEach(function(choiceBox) { choiceBox.classList.add("fadeout");});
    await new Promise(r => setTimeout(r, 500));
    document.getElementById('image-container').style.display = 'none';
    textContainer.innerHTML = 
    `
    <h1>Merci d'avoir participé</h1>
    <p>L'objectif ici n'est pas de vous accabler de culpabilité, mais plutôt de vous sensibiliser aux biais humains et à la manière dont nous percevons la proximité de la mort. Il est indéniable que la mort d'un enfant à l'autre bout du monde a généralement moins d'impact émotionnel que celle d'un enfant qui décède devant nos propres yeux. Bien que le résultat final soit la perte tragique de la vie d'un humain, il peut sembler que la première situation soit plus ordinaire, et que nous ne nous sentions pas directement responsables. En revanche, dans la deuxième situation, où le décès est directement lié à nos choix ou à notre inaction, notre indifférence peut être perçue comme ayant contribué à un acte de violence, en plus des facteurs tels que la proximité physique. N'hésitez pas à partager cette expérience ou à faire un don à des ONG, voire à vous engager.</p>
    <a href="./result.html" style="text-decoration: none;"><button>Voir ce que les autres participants ont répondu</button></a>`;
    textContainer.classList.add("fadein");
    sendMessage()
  }
  }

  start()
  setTimeout(function(){ document.getElementById('button-suivant').style.display = 'block';}, 200);
  changeContentButton.addEventListener("click", function() { changer() });
  choiceContainer1.addEventListener("click", function() { changer() });
  choiceContainer2.addEventListener("click", function() { changer() });
</script>
